FROM ansibleapp/ansibleapp-base
# MAINTAINER {{ $MAINTAINER }}

LABEL "com.redhat.ansibleapp.version"="0.1.0"
LABEL "com.redhat.ansibleapp.spec"=\
"aWQ6IGVhM2YzN2NhLWQzNmEtNGNmYS04Yzk1LWM5ZGU2NGMxZDUzMQotLS0KbmFtZTogYW5zaWJs\
ZWFwcC9wb3N0Z3Jlc3FsLWhhLWFuc2libGVhcHAKZGVzY3JpcHRpb246IHBvc3RncmVzIGhhIHdp\
dGggcGF0cm9uaQpiaW5kYWJsZTogdHJ1ZQphc3luYzogb3B0aW9uYWwKcGFyYW1ldGVyczoKICAt\
IG5hbWU6IHByb2plY3RfbmFtZQogICAgZGVzY3JpcHRpb246IE5hbWUgb2YgT3BlblNoaWZ0IHBy\
b2plY3QKICAgIHR5cGU6IHN0cmluZwogICAgZGVmYXVsdDogcG9zdGdyZXNxbAogIC0gbmFtZTog\
bWVtb3J5X2xpbWl0CiAgICBkZXNjcmlwdGlvbjogU2l6ZSBvZiB0aGUgY2x1c3RlciB0byBkZXBs\
b3kKICAgIHR5cGU6IHN0cmluZwogICAgZGVmYXVsdDogNTEyTWkKICAtIG5hbWU6IGRhdGFiYXNl\
X3NlcnZpY2VfbmFtZQogICAgZGVzY3JpcHRpb246IERhdGFiYXNlIHNlcnZpY2UgbmFtZQogICAg\
dHlwZTogc3RyaW5nCiAgICBkZWZhdWx0OiBwb3N0Z3Jlc3FsCiAgLSBuYW1lOiB2b2x1bWVfY2Fw\
YWNpdHkKICAgIGRlc2NyaXB0aW9uOiB2b2x1bWUgc3BhY2UgYXZhaWxhYmxlIGZvciBkYXRhCiAg\
ICB0eXBlOiBzdHJpbmcKICAgIGRlZmF1bHQ6IDFHaQogIC0gZGVzY3JpcHRpb246IFVzZXJuYW1l\
IGZvciBQb3N0Z3JlU1FMIHVzZXIgdGhhdCB3aWxsIGJlIHVzZWQgZm9yIGFjY2Vzc2luZyB0aGUg\
ZGF0YWJhc2UuCiAgICBuYW1lOiBwb3N0Z3Jlc3FsX3VzZXIKICAgIHJlcXVpcmVkOiB0cnVlCiAg\
LSBkZXNjcmlwdGlvbjogUGFzc3dvcmQgZm9yIHRoZSBQb3N0Z3JlU1FMIHBvc3RncmVzIHVzZXIu\
CiAgICBuYW1lOiBwb3N0Z3Jlc3FsX3Bvc3RncmVzX3Bhc3N3b3JkCiAgICByZXF1aXJlZDogdHJ1\
ZQogIC0gZGVzY3JpcHRpb246IFBhc3N3b3JkIGZvciB0aGUgUG9zdGdyZVNRTCBhZG1pbi4KICAg\
IG5hbWU6IHBvc3RncmVzcWxfYWRtaW5fcGFzc3dvcmQKICAgIHJlcXVpcmVkOiB0cnVlCiAgLSBk\
ZXNjcmlwdGlvbjogUGFzc3dvcmQgZm9yIHRoZSBQb3N0Z3JlU1FMIGNvbm5lY3Rpb24gdXNlci4K\
ICAgIG5hbWU6IHBvc3RncmVzcWxfcGFzc3dvcmQKICAgIHJlcXVpcmVkOiB0cnVlCiAgLSBkZXNj\
cmlwdGlvbjogVXNlcm5hbWUgZm9yIFBvc3RncmVTUUwgdXNlciB0aGF0IHdpbGwgYmUgdXNlZCBm\
b3IgcmVwbGljYXRpbmcgdGhlIGRhdGFiYXNlLgogICAgbmFtZTogcG9zdGdyZXNxbF9yZXBfdXNl\
cgogICAgcmVxdWlyZWQ6IHRydWUKICAtIGRlc2NyaXB0aW9uOiBQYXNzd29yZCBmb3IgdGhlIFBv\
c3RncmVTUUwgcmVwbGljYXRpb24gdXNlci4KICAgIG5hbWU6IHBvc3RncmVzcWxfcmVwX3Bhc3N3\
b3JkCiAgICByZXF1aXJlZDogdHJ1ZQogIC0gZGVzY3JpcHRpb246IE5hbWUgb2YgdGhlIFBvc3Rn\
cmVTUUwgZGF0YWJhc2UgYWNjZXNzZWQuCiAgICBuYW1lOiBwb3N0Z3Jlc3FsX2RhdGFiYXNlCiAg\
ICByZXF1aXJlZDogdHJ1ZQogICAgdmFsdWU6IHNhbXBsZWRiCg=="
ADD ansibleapp /opt/ansibleapp

RUN useradd -u 1001 -r -g 0 -M -b /opt/ansibleapp -s /sbin/nologin -c "ansibleapp user" ansibleapp
RUN chown -R 1001:0 /opt/ansibleapp
USER 1001
